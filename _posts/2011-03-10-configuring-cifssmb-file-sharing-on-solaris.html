---
layout: post
status: publish
published: true
title: Configuring CIFS&#47;SMB File Sharing on Solaris
author:
  display_name: Andrew Kroh
  login: akroh
  email: andy@crowbird.com
  url: ''
author_login: akroh
author_email: andy@crowbird.com
wordpress_id: 141
wordpress_url: https://blog.crowbird.com/blog/?p=141
date: '2011-03-10 00:58:39 -0500'
date_gmt: '2011-03-10 04:58:39 -0500'
categories:
- Solaris
tags: []
comments: []
---
<p>Solaris 11 comes with the CIFS&#47;SMB server installed so you do not need to download or install any additional packages. You simply need to enable the SMB server, configure the PAM module to allow authentication of CIFS users, and regenerate passwords for users.</p>
<p><code>$ svcadm enable -rs smb&#47;server<br />
svcadm: svc:&#47;milestone&#47;network depends on svc:&#47;network&#47;physical, which has multiple instances.</p>
<p>$ smbadm join -w JONESNET<br />
After joining  JONESNET the smb service will be restarted automatically.<br />
Would you like to continue? [no]: yes<br />
Successfully joined JONESNET<&#47;code></p>
<p>Now you have the server up and running, but no one will be able to log in. You need to modify &#47;etc&#47;pam.conf to add the following lines.</p>
<p><code>$ pfexec vim &#47;etc&#47;pam.conf<br />
# PAM Module for CIFS&#47;SMB Login<br />
other   password required       pam_smb_passwd.so.1 nowarn<&#47;code></p>
<p>After the PAM module is installed, the passwd command automatically generates CIFS-suitable passwords for new users. You must run the passwd command to generate CIFS-style passwords for existing users.</p>
<p><code>$ passwd<br />
passwd: Changing password for joe<br />
New Password:<br />
Re-enter new Password:<br />
passwd: password successfully changed for joe<&#47;code></p>
<p>Finally user joe can now access CIFS shares on your Solaris box.</p>
<p>To view the shares available on the server you can read &#47;etc&#47;dfs&#47;sharetab. Below you will see a share named testshare that is mounted at &#47;storeagepool&#47;testshare on the server.</p>
<pre>$ cat &#47;etc&#47;dfs&#47;sharetab<br />
&#47;var&#47;smb&#47;cvol                  c$              smb   -    Default Share<br />
&#47;storeagepool&#47;testshare        testshare       smb   -<br />
<&#47;pre></p>
<h4>References<&#47;h4><br />
<a href="http:&#47;&#47;wiki.genunix.org:8080&#47;wiki&#47;index.php&#47;Getting_Started_With_the_Solaris_CIFS_Service">Getting Started With the Solaris CIFS Service - Genunix<&#47;a></p>
